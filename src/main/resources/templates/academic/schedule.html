<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.1/index.global.min.js'></script>
    <script src="https://cdn.jsdelivr.net/npm/@fullcalendar/core@6.1.1/locales/ko.global.js"></script>
    <title>ê·¸ë¦°ëŒ€í•™êµ í•™ì‚¬ì¼ì •</title>
    <link rel="stylesheet" href="/greendae/css/layout/layout.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/6.1.15/index.min.js"></script>
    <script>

        document.addEventListener('DOMContentLoaded', function() {
            var calendarEl = document.getElementById('calendar');
            var calendar = new FullCalendar.Calendar(calendarEl, {
                initialView: 'dayGridMonth',
                locale: "ko",
                // weekends: false,
                headerToolbar: {
                    start: "dayGridMonth,multiMonthYear",
                    center: "title",
                    end: "prevYear,prev,next,nextYear",
                    },

                // ğŸ”¹ FullCalendarê°€ API ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ë¶€ë¶„
                events: function (fetchInfo, successCallback, failureCallback) {
                    fetch('/greendae/calendar/schedule')
                        .then(response => {
                            if (!response.ok) {
                                throw new Error(`HTTP error! Status: ${response.status}`);
                            }
                            return response.json();
                        })
                        .then(data => {
                            console.log("ë°›ì€ ë°ì´í„°:", data); // ğŸ”¹ ë””ë²„ê¹…ìš© ë¡œê·¸
                            successCallback(data); // FullCalendarì— ë°ì´í„° ì „ë‹¬
                        })
                        .catch(error => {
                            console.error("ì´ë²¤íŠ¸ ë¡œë“œ ì˜¤ë¥˜:", error);
                            failureCallback(error);
                        });
                },

                dayCellContent: function (arg) {
                    const { date } = arg;



                    return date.getDate();
                },
            });
            calendar.render();

            
        });

    </script>
</head>
<body>
    <div id="wrapper">
        <!-- í—¤ë” ì‹œì‘ì‘-->
        <th:block th:replace="~{inc/_header}"></th:block>
        <!-- í—¤ë” ë-->
        <!-- ë©”ì¸ ì‹œì‘ì‘-->
        <main>
            <div class="background">
                <div>
                    <span style="margin-top: 10px;">
                        <img src="/greendae/images/ico-home.png" alt="HOME">
                        <img src="/greendae/images/bg-path-arrow.png" alt=">">
                        ëŒ€í•™ì†Œê°œ   
                        <img src="/greendae/images/bg-path-arrow.png" alt=">">
                        <span style="color: #071F4B;">í•™ì‚¬ì¼ì •</span>
                    </span>
                </div>
            </div>
            <section class="content">
                <!-- ì™¼ìª½ ì‚¬ì´ë“œë°” -->
                <th:block th:replace="~{inc/academic/sidebar}"></th:block>
                <!-- ì˜¤ë¥¸ìª½ ê¸€ -->
                <article class="main_content">
                    <div class="main_title">
                        <p>í•™ì‚¬ì¼ì •</p>
                    </div>
                    <div class="main_content_detail">
                        <!-- ìº˜ë¦­ë” ì‹œì‘-->
                        <div id='calendar' style="width: 800px; height: 800px;"></div>
                    </div>
                </article>
            </section>
        </main>
        <!-- ë©”ì¸ ë-->
        <!-- í‘¸í„° ì‹œì‘ì‘-->
        <th:block th:replace="~{inc/_footer}"></th:block>
        <!-- í‘¸í„° ë-->
    </div>
</body>
</html>